<head>
  <title></title>
  <script src="https://f.vimeocdn.com/js/froogaloop2.min.js"></script>
</head>

<body style="height: 100%; width: 100%;">

</body>
<script>
  var PLAYER_ID = 'player';

  function webViewBridge() {
    var vid = "504606566"
    if (!vid) {
      console.log('No `vid` parameter found, not loading Vimeo iframe')
      window.postMessage('No `vid` parameter found, not loading Vimeo iframe');
      return;
    }
    // Generate iframe based on `vid` parameter
    var iframe;
    iframe = document.createElement('iframe');
    iframe.src =
      'https://player.vimeo.com/video/' + vid + '?api=1&player_id=' + PLAYER_ID;
    iframe.width = '100%';
    iframe.height = '98%';
    iframe.frameBorder = '0';
    iframe.webkitallowfullscreen = true;
    iframe.allowfullscreen = true;
    iframe.id = PLAYER_ID;
    document.body.appendChild(iframe);
    var player = $f(iframe);
    // Bind player events to `sendEvent` function so that they are passed
    // through the bridge.
    player.addEvent('ready', function () {
      // Ideally we could just iterate over event names and add the sendEvent
      // handler to each of them, however that doesn't work because sendEvent
      // ends up just being called with whatever was the last event in the array.
      player.addEvent('play', function (data) {
        return sendMessageToRN("PLAYING")
      });
      player.addEvent('playProgress', function (data) {
        return sendMessageToRN("PROGRESS")
      });
      player.addEvent('pause', function (data) {
        return sendMessageToRN("PAUSED")
      });
      player.addEvent('finish', function (data) {
        return sendMessageToRN("STOPPED")
      });
    });


    function sendMessageToRN(message) {
      if (window.ReactNativeWebView.postMessage.length !== 1) {
        setTimeout(sendMessageToRN(message), 200);
      } else {
        window.ReactNativeWebView.postMessage(message);
      }
    }
  }

webViewBridge();

</script>